"use strict";(self.webpackChunktemplate_odin=self.webpackChunktemplate_odin||[]).push([[792],{792:(t,e,n)=>{const a={form:document.querySelector("form"),input:document.querySelector("input"),inputLabel:document.querySelector("label"),searchBtn:document.querySelector(".wrapper button"),spinner:document.querySelector("#spinner"),main:document.querySelector("main"),forecastContainer:document.querySelector(".weather__forecast-cards"),todayContainer:document.querySelector(".weather__card-today"),weatherToggle:document.querySelector(".weather__toggle-temp button"),footer:document.querySelector("footer")},r=async()=>{try{const t=await fetch("https://api.giphy.com/v1/gifs/random?api_key=ps2sKjTvThillCLYQCuqeLMnnxfd8IxF&tag=loading&limit=1");if(!t.ok)throw new Error(`HTTP-error! status is ${t.status}`);return(await t.json()).data}catch(t){return console.error("Error while getting GIF",t),"LOADING..."}},o=()=>{const t=a.spinner,e=a.main,n=a.footer;t.innerHTML="",t.style.background="transparent",t.style.zIndex=0,t.style.display="none",e.hidden=!1,n.hidden=!1},s=t=>{const e=a.spinner,n=a.main,r=a.footer;"string"==typeof t?e.textContent=t:e.innerHTML=`<img src="${t.images.original.url}" alt="${t.title}">`,e.style.background="rgba(2, 2, 2, 0.8)",e.style.zIndex="9999",e.style.display="flex",n.hidden=!0,r.hidden=!0},i=n.p+"images/550ec87570c870945069.svg",c=t=>"°F"===a.weatherToggle.textContent?1.8*t+32:5*(t-32)/9,d=n.p+"images/aa1e03e8b8976ac66c56.svg",l=n.p+"images/792ada92f39ec1e3c233.svg",p=n.p+"images/cf14f1b7cae843e8c70e.svg",m=n.p+"images/8f03c765beae22e1ded3.svg",h=n.p+"images/35c7e31500347be58361.svg",g=n.p+"images/35132a1fd0794a296d58.svg",u=n.p+"images/ae179c819d4ef0f4688d.svg",y=n.p+"video/03b405a8579a48943038.mp4",w=n.p+"video/438dba662d3f94358903.mp4",f=n.p+"video/767cdd979c8d5b8442fa.mp4",v=n.p+"video/b1828943383f32dcab46.mp4",C=n.p+"video/5226db642a1aec1169ee.mp4",b=n.p+"video/10fe0cb5efcf4fcb9556.mp4",$=n.p+"video/a42815235109a44aa18c.mp4",x={searchCity:"Введите город",searchBtn:"Поиск",day:"День",temp:"Температура",tempmax:"Максимальная",tempmin:"Минимальная",feels:"Ощущается как",hum:"Влажность",wind:"Скорость ветра"},T={searchCity:"Type city",searchBtn:"Search",day:"Day",temp:"Temp",tempmax:"Max",tempmin:"Min",feels:"Feels like",hum:"Humidity",wind:"Wind speed"},L={snow:m,"snow-showers-day":m,"snow-showers-night":m,"thunder-rain":h,"thunder-showers-day":h,"thunder-showers-night":h,rain:p,"showers-day":p,"showers-night":p,fog:l,wind:u,cloudy:d,"partly-cloudy-day":d,"partly-cloudy-night":d,"clear-day":g,"clear-night":g,clear:g},k={snow:C,"snow-showers-day":C,"snow-showers-night":C,"thunder-rain":b,"thunder-showers-day":b,"thunder-showers-night":b,rain:v,"showers-day":v,"showers-night":v,fog:f,wind:$,cloudy:w,"partly-cloudy-day":w,"partly-cloudy-night":w,"clear-day":y,"clear-night":y,clear:y},S=(t,e,n)=>{const r=a.weatherToggle.textContent,o="ru"===e?x:T,s=t.icon,d=L[s]||i,l=c(t.temp),p=c(t.feelslike),m=c(t.tempmax),h=c(t.tempmin);return`<div class="weather__card-img">\n\t\t\t\t\t\t<img src="${d}" alt="${t.conditions}">\n\t\t\t\t\t\t<p>${n||""}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="weather__card-details">\n\t\t\t\t\t\t<p>${o.day}: ${t.dayName}</p>\n\t\t\t\t\t\t<p>${t.formattedDate}</p>\n\t\t\t\t\t\t<p>${t.conditions}</p>\n\t\t\t\t\t\t<p>${t.description}.</p>\n\t\t\t\t\t\t<p>${o.temp}: ${"°C"===r?t.temp:l.toFixed(1)} ${a.weatherToggle.textContent}</br>\n\t\t\t\t\t\t${o.feels}: ${"°C"===r?t.feelslike:p.toFixed(1)} ${a.weatherToggle.textContent}</p>\n\t\t\t\t\t\t<p>${o.tempmax}: ${"°C"===r?t.tempmax:m.toFixed(1)} ${a.weatherToggle.textContent}<br/> \n\t\t\t\t\t\t${o.tempmin}: ${"°C"===r?t.tempmin:h.toFixed(1)} ${a.weatherToggle.textContent}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>${o.hum}: ${t.humidity}%</p>\n\t\t\t\t\t\t<p>${o.wind}: ${t.windspeed}kph</p>\n\t\t\t\t\t</div>`};let _=null;const F=async(t,e)=>{try{const n=await(async(t,e)=>{const n=`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${encodeURIComponent(t)}/?key=7RJDBFCGTLPBYZ3P3PPH8YTMK&unitGroup=metric&lang=${e}&iconSet=icons2`,a=await fetch(n);if(!a.ok)throw new Error(`HTTP-error! status is ${a.status}`);return(await a.json()).days})(t,e),r=n.map((t=>((t,e)=>{const n=new Date(t.datetime);return{...t,dayName:n.toLocaleDateString(e,{weekday:"long"}),formattedDate:n.toLocaleDateString(e,{year:"numeric",month:"2-digit",day:"2-digit"})}})(t,e))),[o,...s]=r;((t,e,n)=>{const r=S(t,e,n),o=a.todayContainer;o.innerHTML="",o.innerHTML=`\n\t\t${r}\n\t`})(o,e,t),((t,e)=>{const n=a.forecastContainer,r=document.createDocumentFragment();t.forEach((t=>{const n=document.createElement("div");n.className="weather__card",n.innerHTML=`\n\t\t\t\t\t${S(t,e)}\n\t\t`,r.appendChild(n)})),n.innerHTML="",n.appendChild(r)})(s,e),(t=>{const e=t.icon,n=k[e]||k.default;_||(_=document.createElement("video"),_.classList.add("bg-video--fade"),Object.assign(_,{autoplay:!0,loop:!1,playsInline:!0,muted:!0,"aria-hidden":"true"}),Object.assign(_.style,{position:"fixed",top:"50%",left:"50%",width:"100%",height:"100%",objectFit:"cover",transform:"translate(-50%, -50%)",zIndex:"-1",filter:"brightness(50%)"}),document.body.prepend(_),_.addEventListener("ended",(()=>{_.classList.remove("bg-video--fade"),_.offsetWidth,_.currentTime=0,_.play().catch((()=>{})),_.classList.add("bg-video--fade")}))),_.src!==n&&(_.classList.remove("bg-video--fade"),_.offsetWidth,_.src=n,_.load(),_.play().catch((()=>{})),_.classList.add("bg-video--fade"))})(o)}catch(t){console.error("Weather loading error:",t)}};let M="Minsk";const q=()=>M,D=async t=>{t.preventDefault();const e=navigator.language||"en",n=a.input.value.trim(),i=n.slice(0,1).toUpperCase()+n.slice(1).toLowerCase();(t=>{M=t.slice(0,1).toUpperCase()+t.slice(1).toLowerCase()})(i),t.target.reset();try{const t=await r();s(t),await Promise.all([F(i,e),new Promise((t=>setTimeout(t,2e3)))])}catch(t){console.error(t)}finally{o()}},E=async()=>{const t=navigator.language||"en",e=q();try{const n=await r();s(n),await Promise.all([F(e,t),new Promise((t=>setTimeout(t,2e3)))])}catch(t){console.error(t)}finally{o()}};document.addEventListener("DOMContentLoaded",(()=>{const t=a.form,e=navigator.language||"en";a.inputLabel.textContent="ru"===e?x.searchCity:T.searchCity,a.searchBtn.textContent="ru"===e?x.searchBtn:T.searchBtn,E(),t.addEventListener("submit",D),a.weatherToggle.addEventListener("click",(async t=>{const n=t.currentTarget;n.textContent="°C"===n.textContent?"°F":"°C";const a=q();await F(a,e)})),E(),F(q(),e)}))}},t=>{t(t.s=792)}]);